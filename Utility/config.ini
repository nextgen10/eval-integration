[azure]
; Azure OpenAI credentials — leave blank to use environment variables or backend/.env
endpoint =
api_key =
api_version = 2024-12-01-preview
deployment = gpt-4o
temperature = 0.0

[weights]
; RQS scoring weights — all 5 are auto-normalized to sum to 1.0
; No hidden dynamic fallbacks; what you set is what you get (after normalization)
answer_correctness = 0.35
faithfulness = 0.25
answer_relevancy = 0.25
context_precision = 0.075
context_recall = 0.075

[metrics]
; Enable/disable individual RAGAS metrics (true/false)
faithfulness = true
answer_relevancy = true
context_precision = true
context_recall = true
answer_correctness = true
toxicity = true

[thresholds]
; Per-metric minimum acceptable scores (0.0 – 1.0)
; Metrics scoring below these trigger failure mode flags in diagnostics:
;   faithfulness < threshold      → "Hallucination"
;   context_recall < threshold    → "Retrieval Failure"
;   context_precision < threshold → "Retrieval Failure"
;   answer_relevancy < threshold  → "Low Quality"
;   answer_correctness < threshold→ "Low Quality"
faithfulness = 0.3
answer_relevancy = 0.3
context_precision = 0.3
context_recall = 0.3
answer_correctness = 0.3

[toxicity]
; Queries with toxicity score >= threshold are flagged
threshold = 0.5
; Use a separate (cheaper) deployment for toxicity classification
; Leave blank to use the main [azure] deployment
deployment =

[context]
; How to split multi-chunk contexts in Excel cells
; Options: auto, ||, \n, or any custom delimiter string
; auto = try JSON array first, then ||, then double-newline, then single chunk
delimiter = auto

[bots]
; Prefix stripped from Excel column names to derive bot IDs
; e.g. Bot_ChatGPT with strip_prefix=Bot_ becomes "ChatGPT"
strip_prefix = Bot_

[diagnostics]
; Add diagnostic columns and failure classification to the report
enabled = true

[cache]
; Cache RAGAS metric results to avoid recomputing on repeated runs
; Cached by hash of (query + answer + context + ground_truth + model + temperature)
enabled = false
directory = .nexus_cache

[evaluation]
; Maximum rows to process from input Excel (safety guard)
max_rows = 200
; Evaluate bots in parallel using threads (true/false)
parallel = true
; Maximum parallel workers (capped by number of bots)
max_workers = 2
